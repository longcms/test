import{d as k,u as y,v as F,r as x,n as m,c as C,a as o,b as u,g as i,o as R,h as a,j as f,t as _,E as q}from"./index-BRMU4BMD.js";const B=k({__name:"ResetPasswordView",setup(E){const{t:r}=y(),g=F(),d=x(),b=(t,e,s)=>{if(e==="")s(new Error("Please input the password"));else{if(l.checkPass!==""){if(!d.value)return;d.value.validateField("checkPass",()=>null)}s()}},h=(t,e,s)=>{e===""?s(new Error("Please input the password again")):e!==l.pass?s(new Error("Two inputs don't match!")):s()},l=m({pass:"",checkPass:"",code:""}),v=m({pass:[{required:!0,validator:b,trigger:"blur"}],checkPass:[{required:!0,validator:h,trigger:"blur"}],code:[{type:"string",required:!0,trigger:"blur"}]}),w=t=>{t&&t.validate(e=>{if(e)console.log("submit!"),q({message:"Operation successful.",type:"success"}),t.resetFields(),g.replace({name:"Login"});else return console.log("error submit!"),!1})},P=t=>{t&&t.resetFields()};return(t,e)=>{const s=i("el-input"),p=i("el-form-item"),c=i("el-button"),V=i("el-form");return R(),C("section",null,[o(V,{ref_key:"ruleFormRef",ref:d,style:{"max-width":"600px",margin:"0 auto"},model:l,"status-icon":"",rules:v,"label-width":"auto",class:"demo-ruleForm"},{default:u(()=>[o(p,{label:a(r)("reset.code"),prop:"code"},{default:u(()=>[o(s,{modelValue:l.code,"onUpdate:modelValue":e[0]||(e[0]=n=>l.code=n),placeholder:a(r)("reset.code.placeholder"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(p,{label:a(r)("reset.pass"),prop:"pass"},{default:u(()=>[o(s,{modelValue:l.pass,"onUpdate:modelValue":e[1]||(e[1]=n=>l.pass=n),type:"password",placeholder:a(r)("reset.pass.placeholder"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(p,{label:a(r)("reset.confirm"),prop:"checkPass"},{default:u(()=>[o(s,{modelValue:l.checkPass,"onUpdate:modelValue":e[2]||(e[2]=n=>l.checkPass=n),type:"password",placeholder:a(r)("reset.confirm.placeholder"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(p,{label:" "},{default:u(()=>[o(c,{type:"primary",onClick:e[3]||(e[3]=n=>w(d.value))},{default:u(()=>[f(_(a(r)("Submit")),1)]),_:1}),o(c,{onClick:e[4]||(e[4]=n=>P(d.value))},{default:u(()=>[f(_(a(r)("Reset")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});export{B as default};
